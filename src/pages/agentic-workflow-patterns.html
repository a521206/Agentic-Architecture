<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Workflow Patterns</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for gradients and shadows not easily achievable with Tailwind alone */
        .header-gradient {
            background-image: linear-gradient(to right, #e0f2fe, #bfdbfe, #dbeafe);
        }
        /* Removed section-header-gradient global definition to allow per-section coloring */
        .content-block-bg {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Navigation -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-3">
            <a href="agentic-core-patterns.html" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold py-2 px-4 rounded-lg bg-blue-50 hover:bg-blue-100 transition duration-300 shadow-sm border border-blue-200">
                <i class="fas fa-arrow-left mr-2"></i> Previous: Core Patterns
            </a>
            <a href="../../index.html" class="inline-flex items-center text-gray-700 hover:text-blue-700 font-semibold py-2 px-4 rounded-lg bg-gray-100 hover:bg-gray-200 transition duration-300 shadow-sm border border-gray-300">
                <i class="fas fa-home mr-2"></i> Home
            </a>
            <a href="agentic-communication-patterns.html" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold py-2 px-4 rounded-lg bg-blue-50 hover:bg-blue-100 transition duration-300 shadow-sm border border-blue-200">
                Next: Communication <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
        
        <header class="header-gradient rounded-3xl shadow-2xl p-12 mb-16 text-center border border-blue-300 transform transition-all duration-500 hover:scale-[1.01] hover:shadow-3xl">
            <h1 class="text-5xl md:text-6xl font-extrabold text-blue-900 mb-5 tracking-tight drop-shadow-lg leading-tight">Agentic Workflow Patterns</h1>
            <p class="text-2xl text-blue-700 font-medium opacity-90">Patterns for orchestrating complex workflows and business processes</p>
            <div class="mt-6 max-w-3xl mx-auto bg-white/80 rounded-xl p-6 shadow-lg">
                <p class="text-gray-700 leading-relaxed">These patterns represent the next level of complexity in building advanced LLM agent systems. While single-agent patterns focus on individual agent behavior, these workflow patterns address how to build robust systems composed of multiple agents, tools, and processes. They are foundational patterns from distributed systems architecture that are critical for creating reliable, scalable, and complex agentic applications.</p>
            </div>
        </header>

        <!-- Pattern Navigation Tiles -->
        <nav class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
            <a href="#pipeline" class="bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-blue-200 hover:ring-blue-300 transform hover:scale-105">
                <div class="text-5xl text-blue-600 mb-3"><i class="fas fa-project-diagram"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-blue-800 text-center">Pipeline</h3>
                <p class="text-gray-600 text-center text-sm">Sequential task processing</p>
            </a>

            <a href="#orchestration" class="bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-purple-200 hover:ring-purple-300 transform hover:scale-105">
                <div class="text-5xl text-purple-600 mb-3"><i class="fas fa-music"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-purple-800 text-center">Orchestration</h3>
                <p class="text-gray-600 text-center text-sm">Centralized workflow control</p>
            </a>

            <a href="#choreography" class="bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-green-200 hover:ring-green-300 transform hover:scale-105">
                <div class="text-5xl text-green-600 mb-3"><i class="fas fa-random"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-green-800 text-center">Choreography</h3>
                <p class="text-gray-600 text-center text-sm">Decentralized workflow coordination</p>
            </a>

            <a href="#saga" class="bg-gradient-to-br from-yellow-50 to-yellow-100 hover:from-yellow-100 hover:to-yellow-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-yellow-200 hover:ring-yellow-300 transform hover:scale-105">
                <div class="text-5xl text-yellow-600 mb-3"><i class="fas fa-book"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-yellow-800 text-center">Saga</h3>
                <p class="text-gray-600 text-center text-sm">Distributed transaction management</p>
            </a>

            
            <div class="col-span-full text-center mb-4 mt-8">
                <h3 class="text-2xl font-bold text-gray-700">Supporting Patterns</h3>
            </div>
            
            <a href="#event-sourcing" class="bg-gradient-to-br from-pink-50 to-pink-100 hover:from-pink-100 hover:to-pink-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-pink-200 hover:ring-pink-300 transform hover:scale-105">
                <div class="text-5xl text-pink-600 mb-3"><i class="fas fa-history"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-pink-800 text-center">Event Sourcing</h3>
                <p class="text-gray-600 text-center text-sm">State change tracking & audit</p>
            </a>

            <a href="#cqrs" class="bg-gradient-to-br from-indigo-50 to-indigo-100 hover:from-indigo-100 hover:to-indigo-200 transition-all duration-300 rounded-2xl p-8 flex flex-col items-center shadow-lg ring-1 ring-indigo-200 hover:ring-indigo-300 transform hover:scale-105">
                <div class="text-5xl text-indigo-600 mb-3"><i class="fas fa-exchange-alt"></i></div>
                <h3 class="font-extrabold text-xl mb-2 text-indigo-800 text-center">CQRS</h3>
                <p class="text-gray-600 text-center text-sm">Command Query Separation</p>
            </a>
        </nav>

        <section id="pipeline" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-blue-400 to-blue-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-blue-200">
                    <i class="fas fa-project-diagram text-blue-600"></i> Pipeline Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-blue-100 p-10 mb-10 border border-blue-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-blue-700">
                        <i class="fas fa-info-circle text-blue-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">A linear sequence of processing stages where the output of one stage is the input to the next. Each stage performs a specific transformation or analysis on the data.</p>
                    <p class="text-gray-700 leading-relaxed">This pattern is particularly relevant for LLM agents as it directly parallels the concept of "Prompt Chaining" - the fundamental way to structure multi-step LLM tasks.</p>
                    <p class="text-gray-700 leading-relaxed">Example LLM workflow: Define Goal → Search Web → Synthesize Findings → Draft Report → Review & Edit</p>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-blue-700">
                        <i class="fas fa-puzzle-piece text-blue-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Stages: Processing steps</li>
                        <li>Data Flow: Information transfer</li>
                        <li>Error Handling: Failure management</li>
                        <li>Monitoring: Performance tracking</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-blue-700">
                        <i class="fas fa-code text-blue-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class Pipeline {
    constructor(stages = []) {
        this.stages = stages;
    }

    addStage(stage) {
        this.stages.push(stage);
        return this;
    }

    async execute(input) {
        let result = input;
        
        for (const stage of this.stages) {
            try {
                result = await stage.process(result);
            } catch (error) {
                console.error(`Error in pipeline stage: ${stage.name}`, error);
                throw error;
            }
        }
        
        return result;
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section id="orchestration" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-purple-400 to-purple-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-purple-200">
                    <i class="fas fa-music text-purple-600"></i> Orchestration Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-purple-100 p-10 mb-10 border border-purple-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-purple-700">
                        <i class="fas fa-info-circle text-purple-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">A central orchestrator manages and coordinates the execution of multiple agents or services to achieve a business process or workflow.</p>
                    <p class="text-gray-700 leading-relaxed">This pattern is like having a "manager" agent that delegates tasks to specialized "worker" agents.</p>
                    <p class="text-gray-700 leading-relaxed">Example: A "Travel Agent" orchestrator coordinating a "Flight Booker" agent and a "Hotel Booker" agent. Frameworks like CrewAI are built on this model.</p>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-purple-700">
                        <i class="fas fa-puzzle-piece text-purple-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Orchestrator: Central coordinator</li>
                        <li>Agent Registry: Available agents</li>
                        <li>Task Scheduler: Execution planning</li>
                        <li>Monitor: Execution tracking</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-purple-700">
                        <i class="fas fa-code text-purple-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class Orchestrator {
    constructor() {
        this.agents = {};
        this.scheduler = new TaskScheduler();
        this.monitor = new ExecutionMonitor();
    }

    registerAgent(agent) {
        this.agents[agent.id] = agent;
    }

    async executeWorkflow(workflow) {
        const plan = this.scheduler.createPlan(workflow);
        return this.monitor.execute(plan);
    }

    async handleFailure(agent, error) {
        // Implement failure handling logic
        console.error(`Error in agent ${agent.id}:`, error);
        await this.rollback(agent);
    }

    async rollback(agent) {
        // Implement rollback logic
        console.log(`Rolling back agent ${agent.id}`);
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section id="choreography" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-green-400 to-green-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-green-200">
                    <i class="fas fa-random text-green-600"></i> Choreography Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-green-100 p-10 mb-10 border border-green-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-green-700">
                        <i class="fas fa-info-circle text-green-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">A decentralized workflow pattern where agents interact directly with each other without central coordination, following predefined interaction patterns.</p>
                    <p class="text-gray-700 leading-relaxed">This enables more decentralized, event-driven architectures where agents react to events and messages.</p>
                    <p class="text-gray-700 leading-relaxed">Example: A "customer support" agent creates a "ticket" event, which a "technical agent" then picks up without being directly commanded by the first agent.</p>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-green-700">
                        <i class="fas fa-puzzle-piece text-green-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Interaction Patterns: Defined agent communications</li>
                        <li>Message Bus: Communication channel</li>
                        <li>Agent Registry: Available agents</li>
                        <li>Protocol: Communication rules</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-green-700">
                        <i class="fas fa-code text-green-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class Choreography {
    constructor() {
        this.messageBus = new MessageBus();
        this.agents = {};
        this.protocol = new Protocol();
    }

    registerAgent(agent) {
        this.agents[agent.id] = agent;
        this.messageBus.subscribe(agent);
    }

    async start() {
        for (const agent of Object.values(this.agents)) {
            await agent.start();
        }
    }

    async handleMessage(message) {
        const { sender, receiver, content } = message;
        if (this.protocol.validate(message)) {
            await this.agents[receiver].receive(content);
        }
    }

    async stop() {
        for (const agent of Object.values(this.agents)) {
            await agent.stop();
        }
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section id="saga" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-yellow-400 to-yellow-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-yellow-200">
                    <i class="fas fa-book text-yellow-600"></i> Saga Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-yellow-100 p-10 mb-10 border border-yellow-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-yellow-700">
                        <i class="fas fa-info-circle text-yellow-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">A workflow pattern that manages distributed transactions by breaking them into a sequence of local transactions with compensating actions.</p>
                    <p class="text-gray-700 leading-relaxed">This is crucial for reliability in multi-step LLM tasks, ensuring the system can recover from failures and maintain consistency.</p>
                    <p class="text-gray-700 leading-relaxed">Example: An LLM agent booking a trip might book a flight (step 1) and then try to book a hotel (step 2). If the hotel is full, the Saga pattern ensures the agent knows how to execute a compensating action - canceling the flight - to avoid leaving the system in an inconsistent state.</p>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-yellow-700">
                        <i class="fas fa-puzzle-piece text-yellow-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Transactions: Local operations</li>
                        <li>Compensating Actions: Rollback operations</li>
                        <li>Coordinator: Transaction management</li>
                        <li>Log: Transaction history</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-yellow-700">
                        <i class="fas fa-code text-yellow-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class Saga {
    constructor() {
        this.transactions = [];
        this.log = new TransactionLog();
        this.coordinator = new SagaCoordinator();
    }

    addTransaction(transaction, compensation) {
        this.transactions.push({ transaction, compensation });
    }

    async execute() {
        for (const { transaction, compensation } of this.transactions) {
            try {
                await this.log.startTransaction(transaction);
                await transaction.execute();
                await this.log.commitTransaction(transaction);
            } catch (error) {
                await this.compensate(transaction, compensation);
                throw error;
            }
        }
    }

    async compensate(transaction, compensation) {
        await this.log.startCompensation(transaction);
        await compensation.execute();
        await this.log.commitCompensation(transaction);
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section id="event-sourcing" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-pink-400 to-pink-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-pink-200">
                    <i class="fas fa-history text-pink-600"></i> Event Sourcing Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-pink-100 p-10 mb-10 border border-pink-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-pink-700">
                        <i class="fas fa-info-circle text-pink-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">Stores all changes to application state as a sequence of events, enabling state reconstruction and audit trails.</p>
                    <p class="text-gray-700 leading-relaxed">This is invaluable for debugging, auditing, and maintaining a complete history of agent decisions and actions.</p>
                    <p class="text-gray-700 leading-relaxed">Example: A research assistant agent's event log might look like:</p>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Event 1: "Received research query about climate change"</li>
                        <li>Event 2: "Searched academic databases for recent papers"</li>
                        <li>Event 3: "Analyzed 5 papers and extracted key findings"</li>
                        <li>Event 4: "Generated initial research summary"</li>
                        <li>Event 5: "Revised summary based on new information"</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-pink-700">
                        <i class="fas fa-puzzle-piece text-pink-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Event Store: Sequence of events</li>
                        <li>Event Handlers: State updates</li>
                        <li>Projections: Read models</li>
                        <li>Event Replay: State reconstruction</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-pink-700">
                        <i class="fas fa-code text-pink-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class EventSourcing {
    constructor() {
        this.eventStore = [];
        this.projections = new Map();
    }

    appendEvent(event) {
        this.eventStore.push({
            id: this.generateEventId(),
            type: event.type,
            data: event.data,
            timestamp: new Date()
        });
        this.applyEvent(event);
    }

    applyEvent(event) {
        for (const [name, projection] of this.projections) {
            projection.apply(event);
        }
    }

    replayEvents(projectionName) {
        const projection = this.projections.get(projectionName);
        if (projection) {
            for (const event of this.eventStore) {
                projection.apply(event);
            }
        }
    }
}</code></pre>
                </div>
            </div>
        </section>

        <section id="cqrs" class="mb-20">
            <div class="mb-8">
                <h2 class="text-4xl font-extrabold bg-gradient-to-r from-indigo-400 to-indigo-700 bg-clip-text text-transparent flex items-center gap-3 drop-shadow-md pb-2 border-b-2 border-indigo-200">
                    <i class="fas fa-exchange-alt text-indigo-600"></i> CQRS Pattern
                </h2>
            </div>
            <div class="content-block-bg rounded-3xl shadow-xl ring-2 ring-indigo-100 p-10 mb-10 border border-indigo-200">
                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-indigo-700">
                        <i class="fas fa-info-circle text-indigo-500"></i> Description
                    </h3>
                    <p class="text-gray-700 leading-relaxed">Separates read and write operations into different models, optimizing each for their specific task.</p>
                    <p class="text-gray-700 leading-relaxed">This pattern is particularly valuable for optimizing performance and maintaining consistency in systems that need to both learn from new information (write) and answer questions quickly (read).</p>
                    <p class="text-gray-700 leading-relaxed">Example: A knowledge management agent using CQRS might work like this:</p>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li><strong>Command Side (Write):</strong>
                            <ul class="list-circle list-inside ml-6 mt-2">
                                <li>Processes new documents and updates knowledge base</li>
                                <li>Performs deep analysis and learning</li>
                                <li>Updates embeddings and indexes</li>
                                <li>Can be slower, more resource-intensive</li>
                            </ul>
                        </li>
                        <li class="mt-4"><strong>Query Side (Read):</strong>
                            <ul class="list-circle list-inside ml-6 mt-2">
                                <li>Quickly retrieves relevant information</li>
                                <li>Generates responses to user queries</li>
                                <li>Uses optimized read models</li>
                                <li>Must be fast and responsive</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-indigo-700">
                        <i class="fas fa-puzzle-piece text-indigo-500"></i> Key Components
                    </h3>
                    <ul class="list-disc list-inside text-gray-700 ml-6 mt-4 space-y-2">
                        <li>Command Model: Write operations</li>
                        <li>Query Model: Read operations</li>
                        <li>Event Bus: Model synchronization</li>
                        <li>Data Sync: Model consistency</li>
                    </ul>
                </div>

                <div class="mb-10">
                    <h3 class="font-bold text-2xl mb-4 flex items-center gap-2 text-indigo-700">
                        <i class="fas fa-code text-indigo-500"></i> Implementation
                    </h3>
                    <pre class="bg-gray-900 text-gray-100 rounded-xl p-6 overflow-x-auto text-sm font-mono shadow-inner border border-gray-700"><code class="language-javascript">class CQRS {
    constructor() {
        this.commandModel = new CommandModel();
        this.queryModel = new QueryModel();
        this.eventBus = new EventBus();
    }

    async executeCommand(command) {
        const result = await this.commandModel.execute(command);
        this.eventBus.publish('commandExecuted', result);
        return result;
    }

    async executeQuery(query) {
        return await this.queryModel.execute(query);
    }

    subscribeToEvents() {
        this.eventBus.subscribe('commandExecuted', (event) => {
            this.queryModel.update(event);
        });
    }
}</code></pre>
                </div>
            </div>
        </section>
    </div>
    <script src="../js/app.js"></script>
</body>
</html>
